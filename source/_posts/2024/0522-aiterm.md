---
title: iTerm2に追加されたAIサポートを使ってみる
tags: iTerm2, AI, ChatGPT, CLI
categories: 技術
featured_image: thumb.png
date: 2024-05-22 13:14:40
---


## 背景
こんにちは。 [かりんとうマニア(@karintozuki)](https://twitter.com/karintozuki)です。  
iTerm2のバージョン3.5が公開されたのですが、しれっとAIサポートがついてきていてびっくりしました。

{% asset_img 01_update.png %}

~~（AITermというAIとiTermをかけた高度なジョーク）~~

できることとしては
- 自然言語をコマンドに変換
- AIと対話しながらコマンドを生成
<!-- more -->

今回はどうやってこのAITermを使うのかを解説していきます。

## 前提
- iTerm2のv3.5がインストールされている
- OpenAIのAPIキーを持っている

裏でOpenAIのAPIを使用しているので、OpenAIのAPIキーが必要です。APIキーは公式サイトから発行できます。
安価ですが、お金がかかるのでそこは気をつけてください。

## AIを有効にする
iTerm2を開いてSettingsを開いてください。（MacならCmd+,で開けます。）

{% asset_img 02_config.png %}

AIというタブがあるので、そこを開きます。
API Keyのところにキーを入力します。
また、プロンプトを好きに変更できるので、日本語で返事させることとかもできます。私はとりあえずデフォルトで使っています。

そして、モデルは最新の`gpt-4o`を選びましたが、なんでも良いです。
このToken Limitですが、デフォルトの値だとエラーで4096にしろと怒られたので、この値にしています。

これで設定は完了です。

## 自然言語をプロンプトに変換
この機能を使うと自然言語でやりたいことを書くとコマンドに変換してくれます。
`Edit > Engage Artificial Intelligence` を開いてみてください。

{% asset_img 000_open_engage.png %}

すると、プロンプトを打つウィンドウが開きます。
{% asset_img 001_prompt.png %}

今回はファイル名に”test”を含むファイルを探させています。いつもfindコマンドの使い方を忘れるのでこれは便利です。

しっかりとコマンドを教えてくれました。表示されたコマンドが良さそうであれば、Shift＋Enterで実行することができます。
{% asset_img 002_result.png %}

## AIと対話しながらコマンドを生成
この機能にはCodeciergeという名前がついています。
~~(コンシェルジュとコードをかけた苦しいジョーク）~~

先ほどの機能よりも、もう少し複雑なことをしたいときは、Codeciergeを使うとChatGPTのようにAIと対話をしながら作業できるので便利です。

`Toolbelt > Codecierge`にチェックを入れてください。
また、Toolbeltを表示するために一番上のShow Toolbeltオプションにもチェックが必要です。

{% asset_img 03_toolbar.png %}

するとプロンプトを入力するサイドバーが開きます。

{% asset_img 04_codecierge.png %}

あとは普通にChatGPTのように使います。
今回はファイル内の文字列置換の方法を聞きました。sedもいつもどうやって使うか忘れがちなコマンドですね。

{% asset_img 003_result.png %}

ちゃんと答えてくれました！

## まとめ
今回はiTerm2に追加されたAI機能を紹介しました。他にもGit、grep、正規表現などなど忘れやすい操作がたくさんあるので、自然言語から実行してくれるのはとても便利ですね。

この記事を見て少しでも皆様の生産性が上がれば幸いです。

それじゃ今日はこの辺で。

## 関連記事
こちらの記事もおすすめです。  

[Rust製のエディタHelixを使い始めてNeoVimに戻ってきた話](/2024/03/2024-0309-helix-intro/)